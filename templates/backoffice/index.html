<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="color-scheme" content="light">
    <meta name="view-transition" content="same-origin">
    <title>Bienvenue sur la plateforme CV</title>
    <!-- Bootstrap CSS from CDN with local fallback -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/css/bootstrap.min.css" integrity="sha384-TX8t27EcRE3e/ihU7zmQxVncDAy5uIKz4rEkgIXeMed4M0jlfIDPvg6uqKI2xXr2" crossorigin="anonymous">
    <link rel="stylesheet" href="/assets/styles/styles.css">
</head>
<body>
<header>
    <nav>
        <div class="logo">
            <a href="/">
                <svg version="1.1" id="Calque_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 414.5 81.5" style="enable-background:new 0 0 414.5 81.5; width: 70%" xml:space="preserve" > <g > <path class="st-body" fill="black" d="M24.3,81.2c-8.6,0-17-2.4-23.1-6.7l1-1.5c5.8,4.1,13.9,6.4,22.1,6.4c12.3,0,20.8-5.9,20.8-14.3
		c0-8.1-7.8-12-19.5-15.5c-7.7-2.3-16.5-4.8-16.5-12.2c0-6.4,7.7-9.3,14.8-9.3c6.3,0,11.7,1.5,17.2,4.7l-0.9,1.5
		C35,31.4,30,30,23.9,30c-6.3,0-13,2.4-13,7.6c0,6,7.7,8.3,15.2,10.5c10.1,3,20.8,7,20.8,17.2C46.9,74.6,37.6,81.2,24.3,81.2z" ></path> <path class="st-body" fill="black" d="M84.6,79.9h-1.8V57.1c0-0.2,0.1-0.4,0.2-0.6l23.3-27.8l1.4,1.1L84.6,57.5V79.9z M77.1,57.7L53.9,29.9l1.4-1.1
		l23.3,27.8L77.1,57.7z" ></path> <path class="st-body" fill="black" d="M163.6,80.9l-41.2-49.3l0,48.4l-1.8,0l0-50.8c0-0.4,0.2-0.7,0.6-0.8c0.4-0.1,0.7,0,1,0.3L165,79.7L163.6,80.9z
		 M165.4,54h-1.8V29.1h1.8V54z"></path> <rect x="231.5" y="29.1" class="st-body" width="1.8" height="51.2" ></rect> <path class="st-body" fill="black" d="M270.3,81.2h-19.8c-0.5,0-0.9-0.4-0.9-0.9V45.6h1.8v33.9h18.9c9,0,16.7-2.4,22.2-7c5.4-4.5,8.2-10.6,8.2-17.7
		c0-14.6-12.6-24.8-30.5-24.8h-19.7v-1.8h19.7c19,0,32.3,10.9,32.3,26.6C302.6,70.4,289.3,81.2,270.3,81.2z" ></path> <path class="st-body" fill="black" d="M346.7,81.2c-18.3,0-32-11.4-32-26.5c0-15.3,13.5-26.4,32-26.4c18.6,0,32.1,11.1,32.1,26.4
		C378.8,69.8,365,81.2,346.7,81.2z M346.7,30.1c-17.5,0-30.3,10.3-30.3,24.6c0,14.1,13,24.7,30.3,24.7c17.3,0,30.4-10.6,30.4-24.7
		c0-6.9-3-13.1-8.4-17.6C363.2,32.6,355.4,30.1,346.7,30.1z" ></path> <path class="st-body" fill="black" d="M213.7,81.2H183v-1.8h30.8V81.2z M201.6,55.1H183v-1.8h18.6V55.1z M213.8,30H183v-1.8h30.8V30z" ></path> </g> <g > <polygon class="st-body" fill="black" points="384.7,21.1 384.4,22.4 374,20.4 377.7,19.7 	" ></polygon> <polygon class="st-body" fill="black" points="390.4,25.8 385.3,29 384.6,27.9 390.1,24.4 	" ></polygon> <polygon class="st-body" fill="black" points="396.8,25.8 396.8,25.8 394.3,39.3 393.6,35.7 395.6,25 	" ></polygon> <polygon class="st-body" fill="black" points="394.3,39.3 393,39.3 390.4,25.8 390.1,24.4 390.1,24.4 390.5,24.1 391.3,23.6 393.6,35.7 	" ></polygon> <polygon class="st-body" fill="black" points="393.6,3.7 393.6,3.7 391.6,14.4 391.6,14.4 390.4,13.6 393,0.1 	" ></polygon> <polygon points="394.3,0.1 394.3,0.1 393,0.1 394.3,0.1 	" ></polygon> <polygon class="st-body" fill="black" points="391.6,14.4 391.6,14.8 391.3,15.8 387.2,13.1 385.3,10.3 390.4,13.6 391.6,14.4 	" ></polygon> <polygon class="st-body" fill="black" points="389.3,16.2 387.8,16.4 384.4,11.3 385.3,10.3 387.2,13.1 	" ></polygon> <polygon class="st-body" fill="black" points="390.2,17.4 377.7,19.7 374,20.4 374,19 387.8,16.4 389.3,16.2 389.6,16.5 	" ></polygon> <polygon points="374,19 374,20.4 374,20.4 	" ></polygon> <polygon class="st-body" fill="black" points="396.8,13.6 396.4,13.8 395.6,14.3 393.6,3.7 393.6,3.7 393,0.1 394.3,0.1 394.3,0.1 	" ></polygon> <polygon points="396.4,13.8 395.6,14.4 395.6,14.3 	" ></polygon> <polygon class="st-body" fill="black" points="403,28.1 400.2,26.4 398,23.2 399.4,22.9 	" ></polygon> <polygon class="st-body" fill="black" points="403,28.1 402,29.1 396.8,25.8 396.8,25.8 395.6,25 395.7,24.6 395.8,23.7 400.2,26.4 	" ></polygon> <polygon class="st-body" fill="black" points="413.3,20.4 399.4,22.9 398,23.2 397.1,22 398.2,21.8 398.4,21.7 398.6,21.7 409.6,19.7 	" ></polygon> <polygon points="398,23.2 397.1,22 398,23.2 	" ></polygon> <polygon points="397.1,22 398.4,21.7 398.2,21.8 397.1,22 	" ></polygon> <polygon class="st-body" fill="black" points="403,11.3 399.5,16.4 398,16.2 400.2,13 403,11.3 402,10.3 	" ></polygon> <polygon class="st-body" fill="black" points="413.3,20.4 409.6,19.7 397.1,17.5 397.7,16.5 398,16.2 399.5,16.4 413.3,19 	" ></polygon> <polygon points="413.3,20.4 413.3,20.4 413.3,19 	" ></polygon> <polygon class="st-body" fill="black" points="403,11.3 400.2,13 395.8,15.7 395.6,14.8 395.6,14.4 396.4,13.8 396.8,13.6 402,10.3 	" ></polygon> <polygon points="396.4,13.8 395.6,14.4 395.6,14.3 	" ></polygon> </g> </svg></a>
        </div>
        <ul class="nav-links">
            <li><a href="/admin/jobs" class="obviously-regular">Offres d'emploi</a></li>
            {% if role == "superadmin" %}
            <!--<li><a href="/admin/users" class="obviously-regular">User</a></li>-->
            <li><a href="/admin/signup" class="obviously-regular">Sign up user</a></li>
            {% endif %}
            <li><a href="/admin/about" class="obviously-regular">À propos</a></li>
            <li><a id="logout" class="obviously-regular">Déconnexion</a></li>
        </ul>
    </nav>
</header>
<main>
    <section class="d-flex flex-column justify-content-center">
        <div class="container text-center">
            <div class="row justify-content-md-center">
                <div  class="col-md-auto mt-5">
                    <h2>welcome {{ username }} de {{ company_name }} </h2>
                </div>
            </div>

        <!-- Table of Candidates -->
            <div class="row justify-content-md-center">
                <div class="container text-center">
                    <div  class="col-md-auto mt-2">
                        <h2 class="text-center mb-4">Liste des Candidats</h2>
                    </div>
                    {% if list_candidate.len() == 0 %}
                    <div  class="col-md-auto mt-2">
                        <p>Aucun candidat n'a postulé pour le moment.</p>
                    </div>
                    {% else %}
                        <table class="table table-bordered table-striped">
                            <thead>
                            <tr>
                                <th>ID</th>
                                <th>Nom</th>
                                <th>Prénom</th>
                                <th>Téléphone</th>
                                <th>Email</th>
                            </tr>
                            </thead>
                            <tbody>
                            {% for candidate in list_candidate %}
                                <tr>
                                    <td>{{ candidate.id }}</td>
                                    <td>{{ candidate.lastname }}</td>
                                    <td>{{ candidate.firstname }}</td>
                                    <td>{{ candidate.phone }}</td>
                                    <td>{{ candidate.email }}</td>
                                </tr>
                            {% endfor %}
                            </tbody>
                        </table>
                    {% endif %}
                </div>
            </div>
        </div>
    </section>
</main>
<footer>
    <div class="social-network">
        <div class="container">
            <p class="obviously-regular">&copy; 2024 Platforme CV. Tous droits réservés.</p>
        </div>
    </div>
</footer>
<!-- Bootstrap JS and dependencies from CDN with local fallback -->
<script src="https://code.jquery.com/jquery-3.5.1.slim.min.js" integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js" integrity="sha384-9/reFTGAW83EW2RDu2S0VKaIzap3H66lZH81PoYlFhbGU+6BZp6G7niu735Sk7lN" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/js/bootstrap.min.js" integrity="sha384-w1Q4orYjBQndcko6MimVbzY0tgp4pWB4lZ7lr30WKz0vr/aWKhXdBNmNb5D92v7s" crossorigin="anonymous"></script>

<script>
    document.getElementById('logout').addEventListener('click', async function(event) {
        fetch("/admin/logout", {
            method: "POST",
            credentials: "include",
            headers: {
                "Content-Type": "application/json"
            }
        })
        .then(response => {
            console.table(response)
            if (response.ok) {
                console.log('Login successful');
                if(response.redirected === true) {
                    window.location.replace(response.url);
                }
            }
        }).catch (error => {
            console.error('Error during logout:', error);
            alert('An error occurred during logout. Please try again.');
        });
    });
</script>
</body>
</html>
